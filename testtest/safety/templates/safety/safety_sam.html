{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container sam">
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    {% for i in num_of_slides %}
    {% if i == 0 %}
    <li data-target="#carouselExampleIndicators" data-slide-to="{{i}}" class="active"></li>
    {% else %}
    <li data-target="#carouselExampleIndicators" data-slide-to="{{i}}"></li>
    {% endif %}
    {% endfor %}
  </ol>
  <div class="carousel-inner">
    {% for img in images %}
    {% if forloop.counter0 == 0 %}
    <div class="carousel-item active">
      <img src="{{img.image.url}}" data-toggle="modal" data-target="#modal{{forloop.counter0}}" class="d-block w-100" alt="...">
    </div>
    {% else %}
    <div class="carousel-item">
      <img src="{{img.image.url}}" data-toggle="modal" data-target="#modal{{forloop.counter0}}" class="d-block w-100" alt="...">
    </div>
    {% endif %}
    {% endfor %}
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
</div>

{% if not sam_signed %}
<form method="POST">
      {% csrf_token %}
      <div class="form-check text-center">
        <input class="form-check-input" type="checkbox" onchange="document.getElementById('sign').disabled = !this.checked;" name="readsam" value="readsam" id="readsam">
        <label class="form-check-label" for="sign">
          I have read and internalised the Safety Alert Message
        </label>
      </div>
      <p class="text-center"><input type="submit" id="sign" class="btn btn-primary" name="Sign" value="Sign" disabled></p>
</form>
{% endif %}

<!-- Modal -->

{% for img in images %}
<div class="modal fade" id="modal{{forloop.counter0}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <img src="{{img.image.url}}" style="width: 100%;">
      </div>
    </div>
  </div>
</div>
{% endfor %}

{% endblock %}